/*! konneka.org 11-01-2014 */

var cli=exports,argv,curr_opt,curr_val,full_opt,is_long,short_tags=[],opt_list,parsed={},usage,argv_parsed,command_list,commands,daemon,daemon_arg,no_color,show_debug;cli.app=null,cli.version=null,cli.argv=[],cli.argc=0,cli.options={},cli.args=[],cli.command,cli.width=70,cli.option_width=25,cli.native={};var define_native=function(a){Object.defineProperty(cli.native,a,{enumerable:!0,configurable:!0,get:function(){return delete cli.native[a],cli.native[a]=require(a)}})},natives=process.binding("natives");for(var module in natives)define_native(module);cli.output=cli.native.util.print,cli.exit=process.exit;var enable={help:!0,version:!1,daemon:!1,status:!1,timeout:!1,catchall:!1,glob:!1};cli.enable=function(){return Array.prototype.slice.call(arguments).forEach(function(a){switch(a){case"daemon":try{if(daemon=require("daemon"),"function"!=typeof daemon.daemonize)throw"Invalid module"}catch(b){cli.fatal("daemon.node not installed. Please run `npm install daemon`")}break;case"catchall":process.on("uncaughtException",function(a){cli.error("Uncaught exception: "+(a.msg||a))});break;case"help":case"version":case"status":case"autocomplete":case"timeout":break;case"glob":cli.glob=require("glob");break;default:cli.fatal('Unknown plugin "'+a+'"')}enable[a]=!0}),cli},cli.disable=function(){return Array.prototype.slice.call(arguments).forEach(function(a){enable[a]&&(enable[a]=!1)}),cli},cli.setArgv=function(a,b){a="string"==typeof a?a.split(" "):a.slice(),cli.app=a.shift(),b||"node"!==cli.native.path.basename(cli.app)&&process.execPath!==cli.app||(cli.app=a.shift()),cli.app=cli.native.path.basename(cli.app),argv_parsed=!1,cli.args=cli.argv=argv=a,cli.argc=argv.length,cli.options={},cli.command=null},cli.setArgv(process.argv),cli.next=function(){if(argv_parsed||(cli.args=[],argv_parsed=!0),curr_val=null,short_tags.length)return curr_opt=short_tags.shift(),full_opt="-"+curr_opt,curr_opt;if(!argv.length)return!1;if(curr_opt=argv.shift(),"-"===curr_opt||"--"===curr_opt){for(;argv.length;)cli.args.push(argv.shift());return!1}if("-"!==curr_opt[0])return cli.args.push(curr_opt),cli.next();if(is_long="-"===curr_opt[1],curr_opt=curr_opt.substr(is_long?2:1),!is_long&&curr_opt.length>1)return short_tags=curr_opt.split(""),cli.next();var a,b;return is_long&&(a=curr_opt.indexOf("="))>=0&&(curr_val=curr_opt.substr(a+1),curr_opt=curr_opt.substr(0,a),b=curr_val.length,('"'===curr_val[0]&&'"'===curr_val[b-1]||"'"===curr_val[0]&&"'"===curr_val[b-1])&&(curr_val=curr_val.substr(1,b-2)),curr_val.match(/^[0-9]+$/)&&(curr_val=parseInt(curr_val,10))),full_opt=(is_long?"--":"-")+curr_opt,curr_opt},cli.parse=function(a,b){var c,d,e,f=cli.options,g=!a;for(opt_list=a||{},commands=b,command_list=commands||[],commands&&!Array.isArray(commands)&&(command_list=Object.keys(commands));o=cli.next();){e=!1;for(opt in opt_list)if(opt_list[opt]instanceof Array&&(opt_list[opt][0]||(opt_list[opt][0]=opt),o===opt||o===opt_list[opt][0])){if(e=!0,2===opt_list[opt].length){f[opt]=!0;break}if(c=null,4===opt_list[opt].length&&(c=opt_list[opt][3]),opt_list[opt][2]instanceof Array){for(d=0,l=opt_list[opt][2].length;l>d;d++)"number"==typeof opt_list[opt][2][d]&&(opt_list[opt][2][d]+="");f[opt]=cli.getArrayValue(opt_list[opt][2],is_long?null:c);break}switch(opt_list[opt][2].toLowerCase&&(opt_list[opt][2]=opt_list[opt][2].toLowerCase()),opt_list[opt][2]){case"string":case 1:case!0:f[opt]=cli.getValue(c);break;case"int":case"number":case"num":case"time":case"seconds":case"secs":case"minutes":case"mins":case"x":case"n":f[opt]=cli.getInt(c);break;case"float":case"decimal":f[opt]=cli.getFloat(c);break;case"path":case"file":case"directory":case"dir":f[opt]=cli.getPath(c,opt_list[opt][2]);break;case"email":f[opt]=cli.getEmail(c);break;case"url":case"uri":case"domain":case"host":f[opt]=cli.getUrl(c,opt_list[opt][2]);break;case"ip":f[opt]=cli.getIp(c);break;case"bool":case"boolean":case"on":f[opt]=!0;break;case"false":case"off":case!1:case 0:f[opt]=!1;break;default:cli.fatal('Unknown opt type "'+opt_list[opt][2]+'"')}break}if(process.env.NODE_DISABLE_COLORS&&(no_color=!0),!e){if(!enable.help||"h"!==o&&"help"!==o)if(!enable.version||"v"!==o&&"version"!==o){if(enable.daemon&&("d"===o||"daemon"===o)){daemon_arg=cli.getArrayValue(["start","stop","restart","pid","log"],is_long?null:"start");continue}if(enable.catchall&&("c"===o||"catch"===o))continue;if(enable.status&&("k"===o||"no-color"===o||"debug"===o)){no_color="k"===o||"no-color"===o,show_debug="debug"===o;continue}if(enable.timeout&&("t"===o||"timeout"===o)){var h=cli.getInt();setTimeout(function(){cli.fatal("Process timed out after "+h+"s")},1e3*h);continue}if(g){f[o]=curr_val||!0;continue}}else null==cli.version&&cli.parsePackageJson(),console.error(cli.app+" v"+cli.version),process.exit();else cli.getUsage(),process.exit();cli.fatal("Unknown option "+full_opt)}}for(opt in opt_list)c=4===opt_list[opt].length?opt_list[opt][3]:null,opt_list[opt]instanceof Array?"undefined"==typeof f[opt]&&(f[opt]=c):f[opt]=opt_list[opt];return command_list.length&&(0===cli.args.length?(enable.help?cli.getUsage():cli.fatal("A command is required ("+command_list.join(", ")+")."),process.exit(1)):cli.command=cli.autocompleteCommand(cli.args.shift())),cli.argc=cli.args.length,f},cli.autocompleteCommand=function(a){var b;b=command_list instanceof Array?command_list:Object.keys(command_list);var c,d,e=0,f=a.length;if(0===b.length||-1!==b.indexOf(a))return a;for(c=0;f>c&&(d=[],l=b.length,!(1>=l));c++){for(e=0;l>e;e++)b[e].length>=c&&b[e][c]===a[c]&&d.push(b[e]);b=d}return l=b.length,1===l?b[0]:(0===l?cli.fatal('Unknown command "'+a+'"'+(enable.help?". Please see --help for more information":"")):(b.sort(),cli.fatal('The command "'+a+'" is ambiguous and could mean "'+b.join('", "')+'"')),void 0)},cli.status=function(a,b){var c;switch(b){case"info":c=no_color?"INFO:":"[33mINFO[0m:";break;case"debug":c=no_color?"DEBUG:":"[36mDEBUG[0m:";break;case"error":case"fatal":c=no_color?"ERROR:":"[31mERROR[0m:";break;case"ok":c=no_color?"OK:":"[32mOK[0m:"}a=c+" "+a,"fatal"===b&&(console.error(a),process.exit(1)),(!enable.status||show_debug||"debug"!==b)&&console.error(a)},["info","error","ok","debug","fatal"].forEach(function(a){cli[a]=function(b){cli.status(b,a)}}),cli.setApp=function(a,b){return-1!==a.indexOf("package.json")?cli.parsePackageJson(a):(cli.app=a,cli.version=b),cli},cli.parsePackageJson=function(a){var b=function(a){var b=JSON.parse(cli.native.fs.readFileSync(a,"utf8"));cli.version=b.version,cli.app=b.name},c=function(a,b,c){for(var d=0,e=a.length;e>d;d++)try{return b(a[d]),void 0}catch(f){d===e-1&&cli.fatal(c)}};try{if(a)return b(a);c([__dirname+"/package.json",__dirname+"/../package.json",__dirname+"/../../package.json"],b)}catch(d){cli.fatal("Could not detect "+cli.app+" version")}},cli.setUsage=function(a){return usage=a,cli};var pad=function(a,b){if("undefined"==typeof b&&(b=a,a=""),a.length<b)for(b-=a.length;b--;)a+=" ";return a};cli.getUsage=function(){var a,b,c,d,e=[],f=cli.option_width,g=function(a,b){var c=a.length,d=cli.width-c,e="";if(b.length<=d)return b;for(var f,g=(b+"").split(" "),h=0;g.length;)e+=(f=g.shift())+" ",h+=f.length,g.length&&h+g[0].length>d&&(e+="\n"+pad(c),h=0);return e};usage=usage||cli.app+" [OPTIONS]"+(command_list.length?" <command>":"")+" [ARGS]",no_color?(console.error("Usage:\n  "+usage),console.error("Options: ")):(console.error("[1mUsage[0m:\n  "+usage),console.error("\n[1mOptions[0m: "));for(opt in opt_list)1===opt.length?(long=opt_list[opt][0],a=opt):(long=opt,a=opt_list[opt][0]),b=opt_list[opt][1].trim(),type=opt_list[opt].length>=3?opt_list[opt][2]:null,c=4===opt_list[opt].length?opt_list[opt][3]:null,d=a===long?1===a.length?"  -"+a:"      --"+long:"  -"+a+", --"+long,d+=" ",type&&(type instanceof Array&&(b+=". VALUE must be either ["+type.join("|")+"]",type="VALUE"),(type===!0||1===type)&&(type=long.toUpperCase()),type=type.toUpperCase(),("FLOAT"===type||"INT"===type)&&(type="NUMBER"),d+=c?"["+type+"]":type),d=pad(d,f),d+=g(d,b),d+=c?" (Default is "+c+")":"",console.error(d.replace("%s","%\x00s")),e.push(a),e.push(long);if(enable.timeout&&-1===e.indexOf("t")&&-1===e.indexOf("timeout")&&console.error(pad("  -t, --timeout N",f)+"Exit if the process takes longer than N seconds"),enable.status&&(-1===e.indexOf("k")&&-1===e.indexOf("no-color")&&console.error(pad("  -k, --no-color",f)+"Omit color from output"),-1===e.indexOf("debug")&&console.error(pad("      --debug",f)+"Show debug information")),enable.catchall&&-1===e.indexOf("c")&&-1===e.indexOf("catch")&&console.error(pad("  -c, --catch",f)+"Catch unanticipated errors"),enable.daemon&&-1===e.indexOf("d")&&-1===e.indexOf("daemon")&&console.error(pad("  -d, --daemon [ARG]",f)+"Daemonize the process. Control the daemon using [start, stop, restart, log, pid]"),enable.version&&-1===e.indexOf("v")&&-1===e.indexOf("version")&&console.error(pad("  -v, --version",f)+"Display the current version"),enable.help&&-1===e.indexOf("h")&&-1===e.indexOf("help")&&console.error(pad("  -h, --help",f)+"Display help and usage details"),command_list.length)if(console.error("\n[1mCommands[0m: "),Array.isArray(commands))command_list.sort(),console.error("  "+g("  ",command_list.join(", ")));else for(var h in commands)d="  "+pad(h,f-2),d+=g(d,commands[h]),console.error(d);process.exit()},cli.getOptError=function(a,b){var c=full_opt+" expects "+a+". Use `"+cli.app+" "+full_opt+(is_long?"=":" ")+b+"`";return c},cli.getValue=function(a,b,c){c=c||cli.getOptError("a value","VALUE");var d;try{if(curr_val)return b&&(curr_val=b(curr_val)),curr_val;if(short_tags.length)throw"Short tags";if(!argv.length||1===argv[0].length&&"-"===argv[0][0])throw"No value";d=argv.shift(),d.match(/^[0-9]+$/)&&(d=parseInt(d,10)),b&&(d=b(d))}catch(e){return d&&argv.unshift(d),null!=a?a:cli.fatal(c)}return d},cli.getInt=function(a){return cli.getValue(a,function(a){if("number"==typeof a)return a;if(!a.match(/^(?:-?(?:0|[1-9][0-9]*))$/))throw"Invalid int";return parseInt(a)},cli.getOptError("a number","NUMBER"))},cli.getFloat=function(a){return cli.getValue(a,function(a){if(!a.match(/^(?:-?(?:0|[1-9][0-9]*))?(?:\.[0-9]*)?$/))throw"Invalid float";return parseFloat(a,10)},cli.getOptError("a number","NUMBER"))},cli.getUrl=function(a,b){return b=b||"url",cli.getValue(a,function(a){if(!a.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2})?)|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/i))throw"Invalid URL";return a},cli.getOptError("a "+b,b.toUpperCase()))},cli.getEmail=function(a){return cli.getValue(a,function(a){if(!a.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/))throw"Invalid email";return a},cli.getOptError("an email","EMAIL"))},cli.getIp=function(a){return cli.getValue(a,function(a){if(!a.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/))throw"Invalid IP";return a},cli.getOptError("an IP","IP"))},cli.getPath=function(a,b){return b=b||"path",cli.getValue(a,function(a){if(a.match(/[?*:;{}]/))throw"Invalid path";return a},cli.getOptError("a "+b,b.toUpperCase()))},cli.getArrayValue=function(a,b){return cli.getValue(b,function(b){if(-1===a.indexOf(b))throw"Unexpected value";return b},cli.getOptError("either ["+a.join("|")+"]","VALUE"))},cli.withStdin=function(a,b){"function"==typeof a&&(b=a,a="utf8");var c=process.openStdin(),d="";c.setEncoding(a),c.on("data",function(a){d+=a}),c.on("end",function(){b.apply(cli,[d])})},cli.withStdinLines=function(a){cli.withStdin(function(b){var c=-1!==b.indexOf("\r\n")?"\r\n":"\n";a.apply(cli,[b.split(c),c])})},cli.withInput=function(a,b,c){if("function"==typeof b?(c=b,b="utf8"):"function"==typeof a&&(c=a,b="utf8",a="stdin"),"stdin"===a)a=process.openStdin();else try{a=cli.native.fs.createReadStream(a),a.on("error",cli.fatal)}catch(d){return cli.fatal(d)}a.setEncoding(b);var e,f,g=[],h="";a.on("data",function(a){if(!e){if(h+=a,!f)if(-1!==h.indexOf("\r\n"))f="\r\n";else{if(-1===h.indexOf("\n"))return last_line=h,void 0;f="\n"}for(g=h.split(f),h=e?null:g.pop();g.length;)c.apply(cli,[g.shift(),f,!1])}}),a.on("end",function(){e=!0,h.length&&c.apply(cli,[h,f||"",!1]),c.apply(cli,[null,null,!0])})},cli.daemon=function(a,b){"undefined"==typeof daemon&&cli.fatal("Daemon is not initialized"),"function"==typeof a&&(b=a,a="start");var c="/tmp/"+cli.app+".pid",d="/tmp/"+cli.app+".log",e=function(){daemon.daemonize(d,c,function(a){return a?cli.error("Error starting daemon: "+a):(b(),void 0)})},f=function(){try{cli.native.fs.readFileSync(c)}catch(a){return cli.error("Daemon is not running")}daemon.kill(c,function(a,b){return a&&3===a.errno?cli.error("Daemon is not running"):a?cli.error("Error stopping daemon: "+a.errno):(cli.ok("Successfully stopped daemon with pid: "+b),void 0)})};switch(a){case"stop":f();break;case"restart":daemon.stop(c,function(){e()});break;case"log":try{cli.native.fs.createReadStream(d,{encoding:"utf8"}).pipe(process.stdout)}catch(g){return cli.error("No daemon log file")}break;case"pid":try{var h=cli.native.fs.readFileSync(c,"utf8");cli.native.fs.statSync("/proc/"+h),cli.info(h)}catch(g){return cli.error("Daemon is not running")}break;default:e()}},cli.main=function(a){var b=function(){a.apply(cli,[cli.args,cli.options])};enable.daemon&&daemon_arg?cli.daemon(daemon_arg,b):b()},cli.createServer=function(){var a=function(a,b,c){return c?(console.error(c.stack),b.writeHead(500,{"Content-Type":"text/plain"}),b.end(c.stack+"\n")):(b.writeHead(404,{"Content-Type":"text/plain"}),b.end("Not Found\n"),void 0)},b=error=a,c=Array.prototype.slice.call(arguments);return c.length&&c[0]instanceof Array&&(c=c[0]),c.reverse().forEach(function(a){var c=b;b=function(b,d){try{a(b,d,function(a){return a?error(b,d,a):(c(b,d),void 0)})}catch(e){error(b,d,e)}}}),cli.native.http.createServer(b)},cli.exec=function(a,b,c){cli.native.child_process.exec(a,function(a,d,e){return(a=a||e)?c?c(a,d):cli.fatal("exec() failed\n"+a):(b&&b(d.split("\n")),void 0)})};var last_progress_call,progress_len=74;cli.progress=function(a,b){if(!(0>a||a>1||isNaN(a))){b||(b=0);var c=(new Date).getTime();if(!(last_progress_call&&100>c-last_progress_call&&1!==a)){last_progress_call=c;var d=Math.floor(progress_len*a),e="";0==d&&a>0&&(d=1);for(var f=1;progress_len>=f;f++)e+=d>=f?"#":" ";var g=Math.pow(10,b),h=Math.floor(100*a*g)/g+"%";for(f=0;b>f;f++)h+=" ";cli.native.util.print("["+e+"] "+h+(1===a?"\n":"\r"))}}};var spinnerInterval;cli.spinner=function(a,b){if(b)return cli.native.util.print("\r"+a),clearInterval(spinnerInterval);a=a+" "||"";var c=["-","\\","|","/"],d=0,e=c.length;spinnerInterval=setInterval(function(){cli.native.util.print("\r"+a+c[d++]),d==e&&(d=0)},200)};
//# sourceMappingURL=/dist/source-maps/uglify-libs.map